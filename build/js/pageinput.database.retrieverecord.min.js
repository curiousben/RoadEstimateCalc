/*
*
* DISCLAIMER:
* The contents of this web application do not nessarily reflect the offical 
* views or policies of the Virginia Department of Transportation, the 
* Commonwealth Transportation Board, or the Federal Highway Administration.
* This web app does not constitue a standard, specification, or regulation.
* Any inclusion of manufacturer names, trade names, or trademarksis for 
* identification purposes only and is not to be considered an endorsement.
*
*/

/* RoadEstimateCalc v0.2.2 | 2015 Virginia Transportation Research Council */
$(document).ready(function(){var a=[],b="empty";$("#SearchButton").click(function(){var c=$("#SearchUPC").val(),d=$("#SearchEstimator").val(),e=$("#SearchRoadNumber").val(),f="";""==c?""==d?$.getJSON("/datarecords/RoadNumber="+e,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):""==e?$.getJSON("/datarecords/Estimator="+d,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):$.getJSON("/datarecords/Estimator&&RoadNumber/"+d+"&&"+e,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):""==d?""==e?$.getJSON("/datarecords/UPC="+c,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):$.getJSON("/datarecords/UPC&&RoadNumber/"+c+"&&"+e,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):""==e?$.getJSON("/datarecords/Estimator&&UPC/"+d+"&&"+c,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}):$.getJSON("/datarecords/Estimator&&UPC&&RoadNumber/"+d+"&&"+c+"&&"+e,function(b){a=b,$.each(b,function(){f+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',f+='<div class="col-xs-4 ">'+this.Estimator+"</div>",f+='<div class="col-xs-4 ">'+this.UPC+"</div>",f+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",f+="</a></div>"}),$("#SearchResultsfromQuery").html(f)}),b="empty"}),$("#SearchResultsfromQuery").on("click","a.linkshowEsti",function(){event.preventDefault();var c=$(this).attr("rel"),d=0,e=0;ClickedonRecord={1:"",2:"",3:""};for(var f=0;f<=c.length-1;f++)"|"==c[f]&&(e++,word=c.substring(d,f),ClickedonRecord[e]=word,d=f+1,2==e&&(word=c.substr(d),ClickedonRecord[3]=word));for(var f=a.length-1;f>=0;f--)a[f].Estimator==ClickedonRecord[1]&&a[f].UPC==ClickedonRecord[2]&&a[f].RoadNumber==ClickedonRecord[3]&&(b=a[f]);$("#loadEstimator").text(b.Estimator),$("#loadUPC").text(b.UPC),$("#loadRoadNumber").text(b.RoadNumber),$("#loadDateCreated").text(b.DateCreated),$("#loadDateUpdated").text(b.DateUpdated)}),$("#ImportDatarecord").click(function(){if("empty"!=b){var a=JSON.parse(b.DataArray);localStorage.clear();for(var c in a)localStorage.setItem(c,a[c]);localStorage.setItem("ImportEstimator",b.Estimator),localStorage.setItem("ImportUPC",b.UPC),localStorage.setItem("ImportRoadNumber",b.RoadNumber)}})});