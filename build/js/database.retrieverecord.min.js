/*
*
* DISCLAIMER:
* The contents of this web application do not nessarily reflect the offical 
* views or policies of the Virginia Department of Transportation, the 
* Commonwealth Transportation Board, or the Federal Highway Administration.
* This web app does not constitue a standard, specification, or regulation.
* Any inclusion of manufacturer names, trade names, or trademarksis for 
* identification purposes only and is not to be considered an endorsement.
*
*/

/* RoadEstimateCalc v0.2.2 | 2015 Virginia Transportation Research Council */
$(document).ready(function(){var EstimatorListData=[],thisEstiObject="empty";$("#SearchButton").click(function(){var UPC=$("#SearchUPC").val(),Estimator=$("#SearchEstimator").val(),RoadNumber=$("#SearchRoadNumber").val(),tableContent="";""==UPC?""==Estimator?$.getJSON("/datarecords/RoadNumber="+RoadNumber,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):""==RoadNumber?$.getJSON("/datarecords/Estimator="+Estimator,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):$.getJSON("/datarecords/Estimator&&RoadNumber/"+Estimator+"&&"+RoadNumber,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):""==Estimator?""==RoadNumber?$.getJSON("/datarecords/UPC="+UPC,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):$.getJSON("/datarecords/UPC&&RoadNumber/"+UPC+"&&"+RoadNumber,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):""==RoadNumber?$.getJSON("/datarecords/Estimator&&UPC/"+Estimator+"&&"+UPC,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}):$.getJSON("/datarecords/Estimator&&UPC&&RoadNumber/"+Estimator+"&&"+UPC+"&&"+RoadNumber,function(datarecords){EstimatorListData=datarecords,$.each(datarecords,function(){tableContent+='<div class="col-xs-12 SelectedRow"><a href="#" class="linkshowEsti" rel="'+this.Estimator+"|"+this.UPC+"|"+this.RoadNumber+'">',tableContent+='<div class="col-xs-4 ">'+this.Estimator+"</div>",tableContent+='<div class="col-xs-4 ">'+this.UPC+"</div>",tableContent+='<div class="col-xs-4 ">'+this.RoadNumber+"</div>",tableContent+="</a></div>"}),$("#SearchResultsfromQuery").html(tableContent)}),thisEstiObject="empty"}),$("#SearchResultsfromQuery").on("click","a.linkshowEsti",function(){event.preventDefault();var recordinfo=$(this).attr("rel"),h=0,wordcount=0;ClickedonRecord={1:"",2:"",3:""};for(var i=0;i<=recordinfo.length-1;i++)"|"==recordinfo[i]&&(wordcount++,word=recordinfo.substring(h,i),ClickedonRecord[wordcount]=word,h=i+1,2==wordcount&&(word=recordinfo.substr(h),ClickedonRecord[3]=word));for(var i=EstimatorListData.length-1;i>=0;i--)EstimatorListData[i].Estimator==ClickedonRecord[1]&&EstimatorListData[i].UPC==ClickedonRecord[2]&&EstimatorListData[i].RoadNumber==ClickedonRecord[3]&&(thisEstiObject=EstimatorListData[i]);$("#loadEstimator").text(thisEstiObject.Estimator),$("#loadUPC").text(thisEstiObject.UPC),$("#loadRoadNumber").text(thisEstiObject.RoadNumber),$("#loadDateCreated").text(thisEstiObject.DateCreated),$("#loadDateUpdated").text(thisEstiObject.DateUpdated)}),$("#ImportDatarecord").click(function(){if("empty"!=thisEstiObject){var DataArrayObject=JSON.parse(thisEstiObject.DataArray);localStorage.clear();for(var i in DataArrayObject)localStorage.setItem(i,DataArrayObject[i]);localStorage.setItem("ImportEstimator",thisEstiObject.Estimator),localStorage.setItem("ImportUPC",thisEstiObject.UPC),localStorage.setItem("ImportRoadNumber",thisEstiObject.RoadNumber)}})});